(function(a){function m(){a(".wc-shipping-zone-rows").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.wc-shipping-zone-sort",scrollSensitivity:40});a(".wc-shipping-zone-region-select:not(.enhanced)").select2();a(".wc-shipping-zone-region-select:not(.enhanced)").addClass("enhanced");a(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}if("undefined"===typeof yith_wpv_shipping_general)return!1;var n={};n={message:null,overlayCSS:{background:"#fff",
        opacity:.6}};a(document).on("click","#yith-wcmv-btn-add",function(a){a.preventDefault()});a(document).on("click",".yith-wpdv-wc-shipping-zone-postcodes-toggle",function(c){c.preventDefault();a(this).closest("tr").find(".wc-shipping-zone-postcodes").show();a(this).hide()});a(document).on("click",".yith-wpdv-wc-shipping-zone-delete",function(c){c.preventDefault();a(this).closest("tr").remove()});a("#yith-wpv-shipping-metohd-btn-add").click(function(c){c.preventDefault();var d=a(document).find("table.wc-shipping-zones"),
    b=d.children("tbody");d.block(n);a.post(yith_wpv_shipping_general.ajax_url,{action:"yith_wpv_shipping_add_new_option"},function(a){b.append(a);b.closest("form").find('select[name="type"]').change();m();d.unblock()})});m();a(document.body).on("click",".yith-wpv-shipping-methods-add",function(c){c.preventDefault();c=a(this).data("key");a(this).WCBackboneModal({template:"wc-modal-add-shipping-method",variable:{yith_wpd_area_key:c}})});a(document.body).on("wc_backbone_modal_loaded",function(c,d,b){"undefined"!=
typeof a("#yith-wpv-shipping-method-dropdown")&&a("#yith-wpv-shipping-method-dropdown").change();var e=a(".wc-backbone-modal-edit-shipping-mode");if(0<e.length){var g=e.find('input[name="yith_wpd_shipping_type"]').val(),h=e.find('input[name="yith_wpd_shipping_key"]').val(),f=a("#method_title_"+h),k=a("#method_tax_status_"+h);b=a("#method_cost_"+h);d=a("#method_requires_"+h);c=a("#min_amount_"+h);var l=e.find('input[name="woocommerce_'+g+'_title"]');0<l.length&&l.val(f.val());f=e.find('select[name="woocommerce_'+
    g+'_tax_status"]');0<f.length&&f.val(k.val());k=e.find('input[name="woocommerce_'+g+'_cost"]');0<k.length&&k.val(b.val());b=e.find('select[name="woocommerce_free_shipping_requires"]');0<b.length&&(b.val(d.val()),b.change());d=e.find('input[name="woocommerce_free_shipping_min_amount"]');0<d.length&&d.val(c.val());a(".yith-wpv-shipping-method-form-container_"+h+" input.wc-shipping-zone-method-hidden-data").each(function(b){var c=a(this).attr("id");b=c.replace("_"+h,"");if(!b.match("^method_")&&!b.match("^woocommerce_")&&
    !b.match("^yith_wpd_")&&"min_amount"!==b&&"type_id"!==b&&"class_costs"!==b){var d=e.find("#woocommerce_"+g+"_"+b);c=a("#"+c).val();0<d.length&&d.val(c)}"class_costs"===b&&e.find("#woocommerce_"+g+"_"+b).next("p").remove()});m()}});a(document.body).on("wc_backbone_modal_response",function(c,d,b){if("undefined"!=typeof b.yith_wpd_area_key&&null!=b.yith_wpd_area_key&&""!=b.yith_wpd_area_key){var e=a(".yith-wpdv-wc-shipping-zone-methods-list_"+b.yith_wpd_area_key),g=e.find("li:not(.wc-shipping-zone-method-noshipping).wc-shipping-zone-method"),
    h=e.find(".wc-shipping-zone-method-hidden-data");e.find(".wc-shipping-zone-methods-add-row");e.block(n);d={action:"yith_wpv_shipping_add_new_shipping_method",data:b};a.post(yith_wpv_shipping_general.ajax_url,d,function(a){e.append(a);e.append(g);e.append(h);e.find(".wc-shipping-zone-method-noshipping").remove();m();e.unblock()})}else if(""!=typeof b.yith_wpd_parent_key&&""!=b.yith_wpd_shipping_key&&""!=b.yith_wpd_shipping_type&&0<a(".wc-backbone-modal-edit-shipping-mode").length){c=a("#method_title_"+
    b.yith_wpd_shipping_key);d=a("#method_tax_status_"+b.yith_wpd_shipping_key);var f=a("#method_cost_"+b.yith_wpd_shipping_key),k=a("#method_requires_"+b.yith_wpd_shipping_key),l=a("#min_amount_"+b.yith_wpd_shipping_key);switch(b.yith_wpd_shipping_type){case "flat_rate":0<c.length&&c.val(b.woocommerce_flat_rate_title);0<d.length&&d.val(b.woocommerce_flat_rate_tax_status);0<f.length&&f.val(b.woocommerce_flat_rate_cost);var p="yith_vendor_data[zone_data]["+b.yith_wpd_parent_key+"][zone_shipping_methods]["+
    b.yith_wpd_shipping_key+"][";a.each(b,function(c,d){var e=c.replace(p,"").replace("]","");if(!e.match("^method_")&&!e.match("^woocommerce_")&&!e.match("^yith_wpd_")&&"min_amount"!==e&&"type_id"!==e){var f;(f=a("#"+e+"_"+b.yith_wpd_shipping_key))&&f.val(b["woocommerce_"+b.yith_wpd_shipping_type+"_"+e])}});break;case "local_pickup":0<c.length&&c.val(b.woocommerce_local_pickup_title);0<d.length&&d.val(b.woocommerce_local_pickup_tax_status);0<f.length&&f.val(b.woocommerce_local_pickup_cost);break;case "free_shipping":0<
c.length&&c.val(b.woocommerce_free_shipping_title),0<k.length&&k.val(b.woocommerce_free_shipping_requires),0<l.length&&l.val(b.woocommerce_free_shipping_min_amount),0<d.length&&d.val(""),0<f.length&&f.val("")}}});a(document.body).on("change","#yith-wpv-shipping-method-dropdown",function(){var c=a(this).find("option:selected").data("description");a(this).parent().find(".wc-shipping-zone-method-description").remove();a(this).after('<p class="wc-shipping-zone-method-description">'+c+"</p>");a(this).closest("article").height(a(this).parent().height())});
    a(document.body).on("click","ul.yith-wpdv-wc-shipping-zone-methods-list li.wc-shipping-zone-method a.method_enabled",function(c){c.preventDefault();c=a(this).data("parent-key");var d=a(this).data("shipping-key"),b=a(this).data("shipping-type"),e=a(this).data("title"),g=a(".yith-wpv-shipping-method-form-container_"+d).html();a(this).WCBackboneModal({template:"wc-modal-edit-shipping-method",variable:{yith_wpd_parent_key:c,yith_wpd_shipping_key:d,yith_wpd_shipping_type:b,yith_wpd_shipping_title:e,yith_wpd_form_data:g}})});
    a(document.body).on("click","ul.yith-wpdv-wc-shipping-zone-methods-list li .wc-shipping-zone-method-remove",function(c){c.preventDefault();c=a(this).closest(".yith-wpv-new-shipping-method-temp");if(0<c.length){var d=a(".yith-wpv-shipping-method-form-container_"+a(this).data("index"));0<d.length&&d.remove();d=c.next(".wc-shipping-zone-method-hidden-data");0<d.length&&d[0].remove();c.remove()}});a(document).on("click",".yith-shipping-method-save-button",function(){a("#yith-save-shipping-settings-button").trigger("click");
        var c=a(document).find("table.wc-shipping-zones");c.find("tbody");c.block(n)})})(jQuery);